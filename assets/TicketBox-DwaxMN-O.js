import{n as k,r as m,j as e,F as d,o as _,p as h,L as C}from"./vendor_react-DFWkwnVY.js";import{B as E}from"./Button-D5J8RPOm.js";const I=k(t=>({cartEvents:JSON.parse(localStorage.getItem("cart"))||[],addTickets:n=>t(r=>{const i=r.cartEvents.find(a=>a.id===n.id);let s;return i?s=r.cartEvents.map(a=>a.id===n.id?{...a,amount:a.amount+n.amount}:a):s=[...r.cartEvents,n],localStorage.setItem("cart",JSON.stringify(s)),{cartEvents:s}}),updateAmount:(n,r)=>t(i=>{let s;return r<=0?s=i.cartEvents.filter(a=>a.id!==n):s=i.cartEvents.map(a=>a.id===n?{...a,amount:r}:a),localStorage.setItem("cart",JSON.stringify(s)),{cartEvents:s}}),removeCartItem:n=>t(r=>{const i=r.cartEvents.filter(s=>s.id!==n);return localStorage.setItem("cart",JSON.stringify(i)),{cartEvents:i}}),clearCart:()=>t(()=>(localStorage.removeItem("cart"),{cartEvents:[]}))}));function D({event:t,variant:n="price",startAmount:r=1}){const[i,s]=m.useState(t.price),[a,o]=m.useState(r),{addTickets:p,updateAmount:u,removeCartItem:x}=I();m.useEffect(()=>{s(t.price*a)},[a]);const v=c=>{c.preventDefault(),o(l=>l+1)},f=c=>{c.preventDefault(),o(l=>l>1?l-1:1)},b=c=>{p({id:t.id,name:t.name,when:t.when,price:t.price,amount:a,where:t.where}),o(1)},j=c=>{c.preventDefault(),o(l=>l+1),u(t.id,a+1)},N=c=>{c.preventDefault(),o(l=>l-1),u(t.id,a-1)},g=c=>{c.preventDefault(),x(t.id),u(t.id,0)};if(n==="price")return e.jsxs(e.Fragment,{children:[e.jsxs("section",{className:"event-details__pricebox","aria-label":"Choose ticket-amount",children:[e.jsxs("p",{className:"event-details__total",children:[i," sek"]}),e.jsxs("div",{className:"event-details__quantity",children:[e.jsx("button",{className:"event-details__button event-details__button--increase",onClick:f,"aria-label":"Decrease ticket-amount",children:e.jsx(d,{icon:_})}),e.jsx("span",{className:"event-details__quantity-amount",children:a}),e.jsx("button",{className:"event-details__button event-details__button--decrease",onClick:v,"aria-label":"Increase ticket-amount",children:e.jsx(d,{icon:h})})]})]}),e.jsx(C,{className:"button",to:"/order-summary",onClick:b,children:"Add to cart"})]});if(n==="info")return e.jsxs("section",{className:"event-details__pricebox event-details__pricebox--big","aria-label":"Choose ticket-amount",style:{textAlign:"left"},children:[e.jsxs("div",{className:"event-details__flex",children:[e.jsx("h3",{className:"page__header page__header--small",children:t.name}),e.jsx(E,{variant:"remove",text:"â¨‰",onClick:g})]}),e.jsxs("p",{className:"event-details__datetime event-details__datetime--small",children:[t.when.date," kl ",t.when.from," - ",t.when.to]}),e.jsxs("div",{className:"event-details__quantity",children:[e.jsx("button",{className:"event-details__button event-details__button--increase",onClick:N,"aria-label":"Decrease ticket-amount",children:e.jsx(d,{icon:_})}),e.jsx("span",{className:"event-details__quantity-amount",children:a}),e.jsx("button",{className:"event-details__button event-details__button--decrease",onClick:j,"aria-label":"Increase ticket-amount",children:e.jsx(d,{icon:h})})]})]})}export{D as T,I as u};
