import{g as j,r as u,j as a,L as N}from"./vendor_react-BaNi6O5c.js";import{B as g}from"./Button-Dc7WlLk1.js";const k=j(e=>({cartEvents:JSON.parse(localStorage.getItem("cart"))||[],addTickets:n=>e(r=>{const c=r.cartEvents.find(t=>t.id===n.id);let s;return c?s=r.cartEvents.map(t=>t.id===n.id?{...t,amount:t.amount+n.amount}:t):s=[...r.cartEvents,n],localStorage.setItem("cart",JSON.stringify(s)),{cartEvents:s}}),updateAmount:(n,r)=>e(c=>{let s;return r<=0?s=c.cartEvents.filter(t=>t.id!==n):s=c.cartEvents.map(t=>t.id===n?{...t,amount:r}:t),localStorage.setItem("cart",JSON.stringify(s)),{cartEvents:s}}),removeCartItem:n=>e(r=>{const c=r.cartEvents.filter(s=>s.id!==n);return localStorage.setItem("cart",JSON.stringify(c)),{cartEvents:c}}),clearCart:()=>e(()=>(localStorage.removeItem("cart"),{cartEvents:[]}))}));function I({event:e,variant:n="price",startAmount:r=1}){const[c,s]=u.useState(e.price),[t,o]=u.useState(r),{addTickets:m,updateAmount:d,removeCartItem:_}=k();u.useEffect(()=>{s(e.price*t)},[t]);const h=l=>{l.preventDefault(),o(i=>i+1)},p=l=>{l.preventDefault(),o(i=>i>1?i-1:1)},v=l=>{m({id:e.id,name:e.name,when:e.when,price:e.price,amount:t,where:e.where}),o(1)},x=l=>{l.preventDefault(),o(i=>i+1),d(e.id,t+1)},f=l=>{l.preventDefault(),o(i=>i-1),d(e.id,t-1)},b=l=>{l.preventDefault(),_(e.id),d(e.id,0)};if(n==="price")return a.jsxs(a.Fragment,{children:[a.jsxs("section",{className:"event-details__pricebox","aria-label":"Choose ticket-amount",children:[a.jsxs("p",{className:"event-details__total",children:[c," sek"]}),a.jsxs("div",{className:"event-details__quantity",children:[a.jsx("button",{className:"event-details__button event-details__button--increase",onClick:p,"aria-label":"Decrease ticket-amount",children:"−"}),a.jsx("span",{className:"event-details__quantity-amount",children:t}),a.jsx("button",{className:"event-details__button event-details__button--decrease",onClick:h,"aria-label":"Increase ticket-amount",children:"+"})]})]}),a.jsx(N,{className:"button",to:"/order-summary",onClick:v,children:"Add to cart"})]});if(n==="info")return a.jsxs("section",{className:"event-details__pricebox event-details__pricebox--big","aria-label":"Choose ticket-amount",style:{textAlign:"left"},children:[a.jsxs("div",{className:"event-details__flex",children:[a.jsx("h3",{className:"page__header page__header--small",children:e.name}),a.jsx(g,{variant:"remove",text:"⨉",onClick:b})]}),a.jsxs("p",{className:"event-details__datetime event-details__datetime--small",children:[e.when.date," kl ",e.when.from," - ",e.when.to]}),a.jsxs("div",{className:"event-details__quantity",children:[a.jsx("button",{className:"event-details__button event-details__button--increase",onClick:f,"aria-label":"Decrease ticket-amount",children:"−"}),a.jsx("span",{className:"event-details__quantity-amount",children:t}),a.jsx("button",{className:"event-details__button event-details__button--decrease",onClick:x,"aria-label":"Increase ticket-amount",children:"+"})]})]})}export{I as T,k as u};
