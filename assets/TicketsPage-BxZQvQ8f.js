import{j as e,B as v,u as g,b as r,d as f,m as j,A as w,e as y,r as k,L as d}from"./vendor_react-BaNi6O5c.js";import{N as T}from"./NavBar-B3LY4nf7.js";import{u as E}from"./useTicketStore-CDLC_FYS.js";/* empty css               */const R={enter:s=>({x:s>0?300:-300,opacity:1,scale:.9,rotateY:s>0?45:-45,position:"absolute",zIndex:0}),center:{x:0,opacity:1,scale:1,rotateY:0,position:"relative",zIndex:1},exit:s=>({x:s>0?-300:300,opacity:1,scale:.9,rotateY:s>0?-45:45,position:"absolute",zIndex:0})};function u({ticket:s}){return e.jsxs("article",{className:"ticket-card",children:[e.jsxs("section",{className:"ticket-card__header",children:[e.jsx("p",{className:"ticket-card__sub-header",children:"WHAT"}),e.jsx("h2",{"aria-label":"Event-name",className:"page__header page__header--small page__header--no-margin",children:s.eventName})]}),e.jsxs("section",{className:"ticket-card__where",children:[e.jsx("p",{className:"ticket-card__sub-header",children:"WHERE"}),e.jsx("h2",{"aria-label":"Event-location",className:"ticket-card__section-title",children:s.where})]}),e.jsxs("section",{className:"ticket-card__when-section",children:[e.jsxs("section",{className:"ticket-card__when-item",children:[e.jsx("p",{className:"ticket-card__sub-header",children:"WHERE"}),e.jsx("h2",{"aria-label":"Event-location",className:"ticket-card__section-title",children:s.when.date.slice(0,6)})]}),e.jsxs("section",{className:"ticket-card__when-item",children:[e.jsx("p",{className:"ticket-card__sub-header",children:"FROM"}),e.jsx("h2",{"aria-label":"Event-location",className:"ticket-card__section-title",children:s.when.from})]}),e.jsxs("section",{className:"ticket-card__when-item",children:[e.jsx("p",{className:"ticket-card__sub-header",children:"TO"}),e.jsx("h2",{"aria-label":"Event-location",className:"ticket-card__section-title",children:s.when.to})]})]}),e.jsxs("section",{className:"ticket-card__seating",children:[e.jsx("p",{className:"ticket-card__sub-header",children:"INFO"}),e.jsxs("p",{"aria-label":"seat info",className:"ticket-card__seat-info",children:["Section ",s.section," - seat ",s.seat]})]}),e.jsxs("section",{className:"ticket-card__barcode-id",children:[e.jsx(v,{value:s.ticketId,height:60,displayValue:!1,background:"#e0e0e0",lineColor:"#2d2d2d","aria-label":`Ticket barcode/id ${s.ticketId}`}),e.jsxs("p",{className:"ticket-card__ticket-id",children:["#",s.ticketId]})]})]})}function S({totalDots:s,currentIndex:t,onDotClick:c}){return e.jsx("section",{className:"ticket-gallery__dots",children:Array.from({length:s}).map((n,a)=>e.jsx("button",{onClick:()=>c(a),className:`dot ${a===t?"active":""}`,"aria-label":`Go to ticket ${a+1}`,"aria-current":a===t?"true":"false"},a))})}function C({tickets:s,currentIndex:t,setCurrentIndex:c,direction:n,setDirection:a}){var x;const l=g(0),h=r(l,[-200,0,200],[-150,-230,-30]),o=r(l,[-200,0,200],[-30,-230,-150]),m=r(l,[-200,0,200],[30,45,60]),_=r(l,[-200,0,200],[-60,-45,-30]),p=f({onSwipedLeft:()=>{t<s.length-1&&(a(1),c(i=>i+1))},onSwipedRight:()=>{t>0&&(a(-1),c(i=>i-1))},preventDefaultTouchmoveEvent:!0,trackMouse:!0}),b=i=>{a(i>t?1:-1),c(i)};return e.jsxs("section",{className:"ticket-gallery",...p,children:[e.jsxs("section",{className:"tickets-container",children:[t>0&&e.jsx(j.div,{className:"ticket-preview previous",style:{left:h,rotateY:m},children:e.jsx(u,{ticket:s[t-1]})}),e.jsx(w,{custom:n,mode:"popLayout",children:e.jsx(j.div,{variants:R,custom:n,initial:"enter",animate:"center",exit:"exit",drag:"x",dragConstraints:{left:0,right:0},dragElastic:.2,transition:{duration:.2,type:"spring",stiffness:300,damping:27},className:"ticket-motion-wrapper",onDragEnd:(i,N)=>{N.offset.x<-100&&t<s.length-1?(a(1),c(t+1)):N.offset.x>100&&t>0&&(a(-1),c(t-1))},children:e.jsx(u,{ticket:s[t]})},(x=s[t])==null?void 0:x.ticketId)}),t<s.length-1&&e.jsx(j.div,{className:"ticket-preview next",style:{right:o,rotateY:_},children:e.jsx(u,{ticket:s[t+1]})})]}),e.jsx(S,{totalDots:s.length,currentIndex:t,onDotClick:b})]})}function z(){const{id:s}=y(),{tickets:t,removeUsedTickets:c}=E(),n=t[s]||[],[a,l]=k.useState(n),[h,o]=k.useState(0),[m,_]=k.useState(0),p=()=>{l([]),c(s),o(0)};return e.jsxs("section",{className:"page page-tickets",children:[e.jsx("h1",{className:"page__header page__header--purple",children:"My tickets"}),a.length>0?e.jsxs("section",{className:"ticket-gallery",children:[e.jsx(C,{tickets:a,currentIndex:h,setCurrentIndex:o,direction:m,setDirection:_}),e.jsxs("section",{className:"page-tickets__buttons",children:[e.jsx(d,{to:"/my-events",className:"button button--browse button--small",children:"↩ Back to my events"}),e.jsx(d,{onClick:p,className:"button button--remove-big button--small",children:"Remove used tickets"})]})]}):e.jsxs(e.Fragment,{children:[e.jsxs("h2",{className:"page__sub-header",children:["You have no tickets ",e.jsx("br",{})," for this event"]}),e.jsxs("section",{className:"page-tickets__buttons",children:[e.jsx(d,{to:"/my-events",className:"button button--browse button--small",children:"Back to my events"}),e.jsx(d,{to:"/all-events",className:"button button--browse button--small",children:"Browse events →"})]})]}),e.jsx(T,{})]})}export{z as default};
