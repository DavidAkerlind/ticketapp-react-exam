import{r as m,j as a,L as j}from"./index-CQB3LBWA.js";import{B as N}from"./Button-CwHSLpnx.js";import{c as g}from"./react-GbyFrLOH.js";const k=g(e=>({cartEvents:JSON.parse(localStorage.getItem("cart"))||[],addTickets:n=>e(r=>{const i=r.cartEvents.find(t=>t.id===n.id);let s;return i?s=r.cartEvents.map(t=>t.id===n.id?{...t,amount:t.amount+n.amount}:t):s=[...r.cartEvents,n],localStorage.setItem("cart",JSON.stringify(s)),{cartEvents:s}}),updateAmount:(n,r)=>e(i=>{let s;return r<=0?s=i.cartEvents.filter(t=>t.id!==n):s=i.cartEvents.map(t=>t.id===n?{...t,amount:r}:t),localStorage.setItem("cart",JSON.stringify(s)),{cartEvents:s}}),removeCartItem:n=>e(r=>{const i=r.cartEvents.filter(s=>s.id!==n);return localStorage.setItem("cart",JSON.stringify(i)),{cartEvents:i}}),clearCart:()=>e(()=>(localStorage.removeItem("cart"),{cartEvents:[]}))}));function S({event:e,variant:n="price",startAmount:r=1}){const[i,s]=m.useState(e.price),[t,o]=m.useState(r),{addTickets:u,updateAmount:d,removeCartItem:_}=k();m.useEffect(()=>{s(e.price*t)},[t]);const h=c=>{c.preventDefault(),o(l=>l+1)},p=c=>{c.preventDefault(),o(l=>l>1?l-1:1)},v=c=>{u({id:e.id,name:e.name,when:e.when,price:e.price,amount:t,where:e.where}),o(1)},x=c=>{c.preventDefault(),o(l=>l+1),d(e.id,t+1)},f=c=>{c.preventDefault(),o(l=>l-1),d(e.id,t-1)},b=c=>{c.preventDefault(),_(e.id),d(e.id,0)};if(n==="price")return a.jsxs(a.Fragment,{children:[a.jsxs("section",{className:"event-details__pricebox","aria-label":"Choose ticket-amount",children:[a.jsxs("p",{className:"event-details__total",children:[i," sek"]}),a.jsxs("div",{className:"event-details__quantity",children:[a.jsx("button",{className:"event-details__button event-details__button--increase",onClick:p,"aria-label":"Decrease ticket-amount",children:"−"}),a.jsx("span",{className:"event-details__quantity-amount",children:t}),a.jsx("button",{className:"event-details__button event-details__button--decrease",onClick:h,"aria-label":"Increase ticket-amount",children:"+"})]})]}),a.jsx(j,{className:"button",to:"/order-summary",onClick:v,children:"Add to cart"})]});if(n==="info")return a.jsxs("section",{className:"event-details__pricebox event-details__pricebox--big","aria-label":"Choose ticket-amount",style:{textAlign:"left"},children:[a.jsxs("div",{className:"event-details__flex",children:[a.jsx("h3",{className:"page__header page__header--small",children:e.name}),a.jsx(N,{variant:"remove",text:"⨉",onClick:b})]}),a.jsxs("p",{className:"event-details__datetime event-details__datetime--small",children:[e.when.date," kl ",e.when.from," - ",e.when.to]}),a.jsxs("div",{className:"event-details__quantity",children:[a.jsx("button",{className:"event-details__button event-details__button--increase",onClick:f,"aria-label":"Decrease ticket-amount",children:"−"}),a.jsx("span",{className:"event-details__quantity-amount",children:t}),a.jsx("button",{className:"event-details__button event-details__button--decrease",onClick:x,"aria-label":"Increase ticket-amount",children:"+"})]})]})}export{S as T,k as u};
