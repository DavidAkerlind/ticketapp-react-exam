import{j as e,B as v,u as f,d as N,e as g,m as j,A as w,f as y,r as p,L as h,F as x,g as b,h as T}from"./vendor_react--lW_bsvM.js";import{N as E}from"./NavBar-DTUDY5dr.js";import{u as S,i as A}from"./useTicketStore-B17VFEkv.js";/* empty css               */const C={enter:s=>({x:s>0?300:-300,opacity:1,scale:.9,rotateY:s>0?45:-45,position:"absolute",zIndex:0}),center:{x:0,opacity:1,scale:1,rotateY:0,position:"relative",zIndex:1},exit:s=>({x:s>0?-300:300,opacity:1,scale:.9,rotateY:s>0?-45:45,position:"absolute",zIndex:0})};function k({ticket:s}){return e.jsxs("article",{className:"ticket-card",children:[e.jsxs("section",{className:"ticket-card__header",children:[e.jsx("p",{className:"ticket-card__sub-header",children:"WHAT"}),e.jsx("h2",{"aria-label":"Event-name",className:"page__header page__header--small page__header--no-margin",children:s.eventName})]}),e.jsxs("section",{className:"ticket-card__where",children:[e.jsx("p",{className:"ticket-card__sub-header",children:"WHERE"}),e.jsx("h2",{"aria-label":"Event-location",className:"ticket-card__section-title",children:s.where})]}),e.jsxs("section",{className:"ticket-card__when-section",children:[e.jsxs("section",{className:"ticket-card__when-item",children:[e.jsx("p",{className:"ticket-card__sub-header",children:"WHEN"}),e.jsx("h2",{"aria-label":"Event-location",className:"ticket-card__section-title",children:s.when.date.slice(0,6)})]}),e.jsxs("section",{className:"ticket-card__when-item",children:[e.jsx("p",{className:"ticket-card__sub-header",children:"FROM"}),e.jsx("h2",{"aria-label":"Event-location",className:"ticket-card__section-title",children:s.when.from})]}),e.jsxs("section",{className:"ticket-card__when-item",children:[e.jsx("p",{className:"ticket-card__sub-header",children:"TO"}),e.jsx("h2",{"aria-label":"Event-location",className:"ticket-card__section-title",children:s.when.to})]})]}),e.jsxs("section",{className:"ticket-card__seating",children:[e.jsx("p",{className:"ticket-card__sub-header",children:"INFO"}),e.jsxs("p",{"aria-label":"seat info",className:"ticket-card__seat-info",children:["Section ",s.section," - seat ",s.seat]})]}),e.jsxs("section",{className:"ticket-card__barcode-id",children:[e.jsx(v,{value:s.ticketId,height:60,displayValue:!1,background:"#e0e0e0",lineColor:"#2d2d2d","aria-label":`Ticket barcode/id ${s.ticketId}`}),e.jsxs("p",{className:"ticket-card__ticket-id",children:["#",s.ticketId]})]})]})}function R({totalDots:s,currentIndex:a,onDotClick:c}){return e.jsx("section",{className:"ticket-gallery__dots",children:Array.from({length:s}).map((l,t)=>e.jsx("button",{onClick:()=>c(t),className:`dot ${t===a?"active":""}`,"aria-label":`Go to ticket ${t+1}`,"aria-current":t===a?"true":"false"},t))})}function B({tickets:s,currentIndex:a,setCurrentIndex:c,direction:l,setDirection:t}){var d;const n=f(0),o=N(n,[-200,0,200],[-200,-255,100]),r=N(n,[-200,0,200],[-200,-255,100]),m=g({onSwipedLeft:()=>{a<s.length-1&&(t(1),c(i=>i+1))},onSwipedRight:()=>{a>0&&(t(-1),c(i=>i-1))},preventDefaultTouchmoveEvent:!0,trackMouse:!0}),_=i=>{t(i>a?1:-1),c(i)};return e.jsxs("section",{className:"ticket-gallery",...m,children:[e.jsxs("section",{className:"tickets-container",children:[a>0&&e.jsx(j.div,{className:"ticket-preview previous",style:{left:o},children:e.jsx(k,{ticket:s[a-1]})}),e.jsx(w,{custom:l,mode:"popLayout",children:e.jsx(j.div,{variants:C,custom:l,initial:"enter",animate:"center",exit:"exit",drag:"x",dragConstraints:{left:0,right:0},dragElastic:.2,transition:{duration:.2,type:"spring",stiffness:300,damping:27},className:"ticket-motion-wrapper",onDragEnd:(i,u)=>{u.offset.x<-100&&a<s.length-1?(t(1),c(a+1)):u.offset.x>100&&a>0&&(t(-1),c(a-1))},children:e.jsx(k,{ticket:s[a]})},(d=s[a])==null?void 0:d.ticketId)}),a<s.length-1&&e.jsx(j.div,{className:"ticket-preview next",style:{right:r},children:e.jsx(k,{ticket:s[a+1]})})]}),e.jsx(R,{totalDots:s.length,currentIndex:a,onDotClick:_})]})}function z(){const{id:s}=y(),{tickets:a,removeUsedTickets:c}=S(),l=a[s]||[],[t,n]=p.useState(l),[o,r]=p.useState(0),[m,_]=p.useState(0),d=()=>{n([]),c(s),r(0)};return e.jsxs("section",{className:"page page-tickets",children:[e.jsx("h1",{className:"page__header page__header--purple",children:"My tickets"}),t.length>0?e.jsxs("section",{className:"ticket-gallery",children:[e.jsx(B,{tickets:t,currentIndex:o,setCurrentIndex:r,direction:m,setDirection:_}),e.jsxs("section",{className:"page-tickets__buttons",children:[e.jsxs(h,{to:"/my-events",className:"button button--browse button--small",children:[e.jsx(x,{icon:b}),"Back to my events"]}),A(t[o])?e.jsxs(h,{onClick:d,className:"button button--remove-big button--small",children:["Remove used tickets",e.jsx(x,{icon:T})]}):""]})]}):e.jsxs(e.Fragment,{children:[e.jsxs("h2",{className:"page__sub-header",children:["You have no tickets ",e.jsx("br",{})," for this event"]}),e.jsxs("section",{className:"page-tickets__buttons",children:[e.jsxs(h,{to:"/my-events",className:"button button--browse button--small",children:[e.jsx(x,{icon:b}),"Back to my events"]}),e.jsx(h,{to:"/all-events",className:"button button--browse button--small",children:"Browse events â†’"})]})]}),e.jsx(E,{})]})}export{z as default};
